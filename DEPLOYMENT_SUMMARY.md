# ๐ฆ OptiFi Deployment - ะะตะทัะผะต

**ะะฐัะฐ:** 10 ัะฝะฒะฐัั 2025  
**ะัะพะตะบั:** OptiFi Credit Analytics  
**ะะตัะบะฐ:** novaya-vetka  
**ะะพะผะตะฝ:** ัะตัะตะฝะฐะฝััะต.ัั  
**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั

---

## ๐ฏ ะงัะพ ะฑัะปะพ ัะดะตะปะฐะฝะพ

ะะพะดะณะพัะพะฒะปะตะฝะฐ **ะฟะพะปะฝะฐั production-ready ะธะฝััะฐััััะบัััะฐ** ะดะปั ัะฐะทะฒะตัััะฒะฐะฝะธั ะฟัะพะตะบัะฐ ะฝะฐ Ubuntu VPS ั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะบะพะฝัะธะณััะฐัะธะตะน SSL ัะตััะธัะธะบะฐัะฐ ะธ ะฟัะธะฒัะทะบะพะน ะบ ะดะพะผะตะฝั.

## ๐ ะกะพะทะดะฐะฝะฝัะต ัะฐะนะปั

### ะัะฝะพะฒะฝัะต ัะฐะนะปั ัะฐะทะฒะตัััะฒะฐะฝะธั (`deploy/`)

| ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต |
|------|-----------|
| `deploy.sh` | ะัะฝะพะฒะฝะพะน ัะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั (ะพะดะฝะฐ ะบะพะผะฐะฝะดะฐ!) |
| `docker-compose.prod.yml` | Production ะบะพะฝัะธะณััะฐัะธั Docker (ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ) |
| `nginx.conf` | ะะพะฝัะธะณััะฐัะธั Nginx ั SSL ะธ reverse proxy |
| `.env.production` | ะจะฐะฑะปะพะฝ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั |
| `test-local.sh` | ะะพะบะฐะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต Docker ะบะพะฝัะธะณััะฐัะธะธ |
| `manage.sh` | ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะธะปะพะถะตะฝะธะตะผ (ะปะพะณะธ, ะฟะตัะตะทะฐะณััะทะบะฐ, ัะตะทะตัะฒะฝัะต ะบะพะฟะธะธ) |
| `DEPLOYMENT.md` | ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ (2000+ ัััะพะบ) |
| `README.md` | ะะฟะธัะฐะฝะธะต ัะฐะนะปะพะฒ ะธ ะฑัััััะน ััะฐัั |

### ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฐะนะปั

| ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต |
|------|-----------|
| `microservices/credit-analytics-backend/Dockerfile` | Production Dockerfile ะดะปั Node.js ะผะธะบัะพัะตัะฒะธัะฐ |
| `DEPLOYMENT_QUICKSTART.md` | ะัััััะน ััะฐัั (ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ) |
| `DEPLOYMENT_SUMMARY.md` | ะญัะพ ัะตะทัะผะต |

## ๐ ะัััััะน ััะฐัั

### ะะฐัะธะฐะฝั 1: ะะดะฝะฐ ะบะพะผะฐะฝะดะฐ (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะะฐ VPS ัะตัะฒะตัะต
curl -fsSL https://raw.githubusercontent.com/your-repo/OptiFi/novaya-vetka/deploy/deploy.sh | bash
```

### ะะฐัะธะฐะฝั 2: ะะพัะฐะณะพะฒะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต

ะกะผะพััะธัะต `DEPLOYMENT_QUICKSTART.md` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ.

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  HTTPS (ัะตัะตะฝะฐะฝััะต.ัั)              โ
โ                                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ         Nginx (Reverse Proxy)                โ  โ
โ  โ  - SSL/TLS (Let's Encrypt)                   โ  โ
โ  โ  - Security Headers                          โ  โ
โ  โ  - Gzip Compression                          โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ         โ                          โ                โ
โ         โผ                          โผ                โ
โ  โโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโโ    โ
โ  โ Credit Analyticsโ      โ   Bank API       โ    โ
โ  โ (Express.js)    โ      โ  (FastAPI/Python)โ    โ
โ  โ Port 8100       โ      โ  Port 8000       โ    โ
โ  โโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโโ    โ
โ         โ                          โ                โ
โ         โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโ                โ
โ                        โผ                            โ
โ              โโโโโโโโโโโโโโโโโโโโ                  โ
โ              โ  PostgreSQL 15   โ                  โ
โ              โ  Port 5432       โ                  โ
โ              โโโโโโโโโโโโโโโโโโโโ                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะัะต ะฟะตัะตะผะตะฝะฝัะต ะฝะฐัะพะดัััั ะฒ ัะฐะนะปะต `.env`:

```bash
# Database
POSTGRES_PASSWORD=your-strong-password

# Security
SECRET_KEY=your-long-random-key-min-32-chars

# Team Credentials (from HackAPI)
TEAM_CLIENT_SECRET=your-credentials

# External Banks Consent IDs
VBANK_PRODUCT_AGREEMENT_CONSENT_ID=your-consent-id
# ... ะธ ะดััะณะธะต
```

ะะพะปะฝัะน ัะฟะธัะพะบ ะฒ `deploy/.env.production`.

### Nginx ะบะพะฝัะธะณััะฐัะธั

- ะกะปััะฐะตั ะฟะพััั 80 (HTTP) ะธ 443 (HTTPS)
- ะะฒัะพะผะฐัะธัะตัะบะธะน redirect HTTP โ HTTPS
- SSL ัะตััะธัะธะบะฐั ะพั Let's Encrypt
- Reverse proxy ะดะปั ะพะฑะพะธั ะผะธะบัะพัะตัะฒะธัะพะฒ
- Security headers (HSTS, X-Frame-Options ะธ ั.ะด.)
- Gzip compression
- ะะพะณะธัะพะฒะฐะฝะธะต

## ๐๏ธ ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะธะปะพะถะตะฝะธะตะผ

ะะพัะปะต ัะฐะทะฒะตัััะฒะฐะฝะธั ะธัะฟะพะปัะทัะนัะต ัะบัะธะฟั `manage.sh`:

```bash
cd /opt/optifi

# ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั
bash deploy/manage.sh status          # ะกัะฐััั ัะตัะฒะธัะพะฒ
bash deploy/manage.sh logs            # ะะพะณะธ (follow mode)
bash deploy/manage.sh restart         # ะะตัะตะทะฐะณััะทะธัั ะฒัะต
bash deploy/manage.sh health          # ะัะพะฒะตัะธัั ะทะดะพัะพะฒัะต
bash deploy/manage.sh backup          # ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั ะะ
bash deploy/manage.sh update          # ะะฑะฝะพะฒะธัั ะบะพะด ะธ ะฟะตัะตะทะฐะณััะทะธัั

# ะกะฟัะฐะฒะบะฐ
bash deploy/manage.sh help
```

## ๐ ะขัะตะฑะพะฒะฐะฝะธั

- **ะะก:** Ubuntu 20.04 LTS ะธะปะธ ะฒััะต
- **RAM:** ะะธะฝะธะผัะผ 2GB
- **ะะธัะบ:** ะะธะฝะธะผัะผ 10GB
- **SSH:** ะะพัััะฟ ั ะฟัะฐะฒะฐะผะธ sudo
- **ะะพะผะตะฝ:** ัะตัะตะฝะฐะฝััะต.ัั, ัะบะฐะทัะฒะฐััะธะน ะฝะฐ IP ัะตัะฒะตัะฐ

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- โ SSL/TLS ัะธััะพะฒะฐะฝะธะต (Let's Encrypt)
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ัะตััะธัะธะบะฐัะฐ
- โ Security headers ะฒ Nginx
- โ Non-root user ะฒ Docker ะบะพะฝัะตะนะฝะตัะฐั
- โ Firewall ะบะพะฝัะธะณััะฐัะธั (UFW)
- โ Health checks ะดะปั ะฒัะตั ัะตัะฒะธัะพะฒ
- โ ะัะฐะฒะธะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ัะธะณะฝะฐะปะพะฒ ะฒ ะบะพะฝัะตะนะฝะตัะฐั

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะัะต ะปะพะณะธ
cd /opt/optifi && docker-compose -f docker-compose.prod.yml logs -f

# ะะพะฝะบัะตัะฝัะน ัะตัะฒะธั
cd /opt/optifi && docker-compose -f docker-compose.prod.yml logs -f credit-analytics
```

### ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั

```bash
cd /opt/optifi && bash deploy/manage.sh health
```

### Nginx ะปะพะณะธ

```bash
sudo tail -f /var/log/nginx/optifi_access.log
sudo tail -f /var/log/nginx/optifi_error.log
```

## ๐พ ะะตะทะตัะฒะฝัะต ะบะพะฟะธะธ

### ะกะพะทะดะฐะฝะธะต

```bash
cd /opt/optifi && bash deploy/manage.sh backup
# ะกะพะทะดะฐัั: backup_20250110_120000.sql
```

### ะะพัััะฐะฝะพะฒะปะตะฝะธะต

```bash
cd /opt/optifi && bash deploy/manage.sh restore backup_20250110_120000.sql
```

## ๐ ะะฑะฝะพะฒะปะตะฝะธะต ะฟัะธะปะพะถะตะฝะธั

```bash
cd /opt/optifi && bash deploy/manage.sh update
```

ะะปะธ ะฒัััะฝัั:

```bash
cd /opt/optifi
git pull origin novaya-vetka
docker-compose -f docker-compose.prod.yml build
docker-compose -f docker-compose.prod.yml up -d
```

## ๐ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

ะกะผะพััะธัะต ัะฐะทะดะตะป "ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ" ะฒ:
- `DEPLOYMENT_QUICKSTART.md` - ะดะปั ัะธะฟะธัะฝัั ะฟัะพะฑะปะตะผ
- `DEPLOYMENT.md` - ะดะปั ะฟะพะดัะพะฑะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ

## ๐ ะะพะบัะผะตะฝัะฐัะธั

| ะะพะบัะผะตะฝั | ะกะพะดะตัะถะธะผะพะต |
|----------|-----------|
| `DEPLOYMENT_QUICKSTART.md` | ะัััััะน ััะฐัั (ัะตะบะพะผะตะฝะดัะตััั ะฝะฐัะฐัั ะพัััะดะฐ) |
| `DEPLOYMENT.md` | ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ (2000+ ัััะพะบ) |
| `deploy/README.md` | ะะฟะธัะฐะฝะธะต ัะฐะนะปะพะฒ ะฒ ะฟะฐะฟะบะต deploy/ |
| `README.md` | ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ OptiFi |

## โ ะงะตะบ-ะปะธัั ะฟะตัะตะด ัะฐะทะฒะตัััะฒะฐะฝะธะตะผ

- [ ] DNS ัะตัะตะฝะฐะฝััะต.ัั ัะบะฐะทัะฒะฐะตั ะฝะฐ IP ัะตัะฒะตัะฐ
- [ ] SSH ะดะพัััะฟ ะบ ัะตัะฒะตัั ัะฐะฑะพัะฐะตั
- [ ] ะะฐ ะปะพะบะฐะปัะฝะพะน ะผะฐัะธะฝะต ัััะฐะฝะพะฒะปะตะฝั git ะธ bash
- [ ] ะะพะดะณะพัะพะฒะปะตะฝั credentials:
  - [ ] TEAM_CLIENT_SECRET (ะธะท HackAPI)
  - [ ] ะัะต CONSENT_ID ะดะปั ะฒะฝะตัะฝะธั ะฑะฐะฝะบะพะฒ
- [ ] ะกะพะทะดะฐะฝ ัะธะปัะฝัะน ะฟะฐัะพะปั ะดะปั ะะ (ะผะธะฝะธะผัะผ 16 ัะธะผะฒะพะปะพะฒ)
- [ ] ะกะพะทะดะฐะฝ ะดะปะธะฝะฝัะน SECRET_KEY (ะผะธะฝะธะผัะผ 32 ัะธะผะฒะพะปะฐ)
- [ ] Email ะดะปั SSL ัะตััะธัะธะบะฐัะฐ ะณะพัะพะฒ

## ๐ ะะพัะปะต ัะฐะทะฒะตัััะฒะฐะฝะธั

1. โ ะัะพะฒะตัััะต, ััะพ ะฟัะธะปะพะถะตะฝะธะต ะดะพัััะฟะฝะพ ะฟะพ https://ัะตัะตะฝะฐะฝััะต.ัั
2. โ ะัะพะฒะตัััะต ะปะพะณะธ ะฝะฐ ะพัะธะฑะบะธ: `bash deploy/manage.sh logs`
3. โ ะัะพะฒะตัััะต ะทะดะพัะพะฒัะต ัะตัะฒะธัะพะฒ: `bash deploy/manage.sh health`
4. โ ะกะพะทะดะฐะนัะต ะฟะตัะฒัั ัะตะทะตัะฒะฝัั ะบะพะฟะธั: `bash deploy/manage.sh backup`
5. โ ะะฐัััะพะนัะต ะผะพะฝะธัะพัะธะฝะณ ะธ ะฐะปะตััั

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

- **ะัะตะผั ัะฐะทะฒะตัััะฒะฐะฝะธั:** 5-10 ะผะธะฝัั (ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะธะฟั)
- **ะัะตะผั ะทะฐะฟััะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ:** 30-60 ัะตะบัะฝะด
- **ะัะตะผั ะฟะพะปััะตะฝะธั SSL ัะตััะธัะธะบะฐัะฐ:** 1-2 ะผะธะฝััั
- **ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ:** ~1.5GB (ะฟัะธ ะฟะพะปะฝะพะน ะฝะฐะณััะทะบะต)
- **ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะธัะบะฐ:** ~5GB (ั ะะ ะธ ะปะพะณะฐะผะธ)

## ๐ ะะพัะพะฒะพ!

ะัะต ัะฐะนะปั ัะพะทะดะฐะฝั ะธ ะณะพัะพะฒั ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั. ะัะพะตะบั ะผะพะถะตั ะฑััั ัะฐะทะฒะตัะฝัั:

1. **ะะดะฝะพะน ะบะพะผะฐะฝะดะพะน** - ะธัะฟะพะปัะทัั `deploy.sh`
2. **ะะพัะฐะณะพะฒะพ** - ัะปะตะดัั `DEPLOYMENT_QUICKSTART.md`
3. **ะัััะฝัั** - ัะปะตะดัั `DEPLOYMENT.md`

---

**ะะพะทะดัะฐะฒะปัะตะผ! ะะฐั OptiFi ะณะพัะพะฒ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฝะฐ production! ๐**

ะะปั ะฝะฐัะฐะปะฐ ัะผะพััะธัะต: `DEPLOYMENT_QUICKSTART.md`
